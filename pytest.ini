asyncio_mode = auto
testpaths = tests
python_files = test_*.py
python_classes = Test*
python_functions = test_*
addopts = 
    --verbose
    --cov=src
    --cov-report=html
    --cov-report=term-missing
    -v
markers =
    unit: marca testes unitÃ¡rios
    integration: marca testes de integraÃ§Ã£o
    slow: marca testes lentos
EOF

echo "âœ… pytest.ini criado"
PASSO 9: Criar pyproject.toml
bash
cat > pyproject.toml << 'EOF'
[project]
name = "financial-api"
version = "1.0.0"
description = "API financeira brasileira com suporte CNAB e NFe"
requires-python = ">=3.11"
authors = [
    {name = "Seu Nome", email = "seu@email.com"}
]
readme = "README.md"

[project.optional-dependencies]
dev = [
    "black>=23.12.1",
    "ruff>=0.1.9",
    "mypy>=1.8.0",
    "pytest>=8.3.3",
]

[tool.black]
line-length = 100
target-version = ['py311']
include = '\.pyi?$'
exclude = '''
/(
    \.git
  | \.venv
  | build
  | dist
)/
'''

[tool.ruff]
line-length = 100
select = ["E", "F", "I", "N"]

[tool.mypy]
python_version = "3.11"
warn_return_any = true
warn_unused_configs = true
disallow_untyped_defs = false
EOF

echo "âœ… pyproject.toml criado"
PASSO 10: Criar .env local
bash
cp .env.example .env
echo "âœ… .env criado (edite com seus valores reais)"
PASSO 11: Popular README.md
bash
cat > README.md << 'EOF'
# ğŸ’° Financial API - Sistema Financeiro Brasileiro

API REST para automaÃ§Ã£o de processos financeiros e fiscais no Brasil.

## ğŸš€ Tecnologias

- Python 3.11+
- FastAPI 0.115+
- PostgreSQL 16+
- Redis 7+
- Docker & Docker Compose

## ğŸ“‹ DomÃ­nios

- **Fiscal**: EmissÃ£o de NFS-e, NFC-e
- **RH**: CÃ¡lculos de folha de pagamento
- **Compliance**: VerificaÃ§Ã£o de pendÃªncias fiscais
- **Financeiro**: CNAB, pagamentos bancÃ¡rios

## ğŸ”§ InstalaÃ§Ã£o

### 1. Clonar repositÃ³rio
```bash
git clone <seu-repo>
cd <nome-projeto>
```

### 2. Criar ambiente virtual
```bash
python -m venv .venv
source .venv/bin/activate  # Linux/Mac
.venv\Scripts\activate     # Windows
```

### 3. Instalar dependÃªncias
```bash
pip install -r requirements.txt
```

### 4. Instalar python-cnab via Git
```bash
pip install git+https://github.com/scardine/cnab.git
```

### 5. Configurar variÃ¡veis de ambiente
```bash
cp .env.example .env
# Edite .env com suas configuraÃ§Ãµes
```

### 6. Rodar servidor
```bash
uvicorn src.main:app --reload --port 8000
```

## ğŸ“– DocumentaÃ§Ã£o

- Swagger UI: http://localhost:8000/api/docs
- ReDoc: http://localhost:8000/api/redoc

## ğŸ§ª Testes
```bash
# Rodar todos os testes
pytest

# Com coverage
pytest --cov=src --cov-report=html

# Ver relatÃ³rio
open htmlcov/index.html
```

## ğŸ³ Docker
```bash
# Subir todos os serviÃ§os
docker-compose up -d

# Ver logs
docker-compose logs -f api

# Parar serviÃ§os
docker-compose down
```

## ğŸ“ Estrutura
```
src/
â”œâ”€â”€ fiscal/        # DomÃ­nio fiscal (NFS-e)
â”œâ”€â”€ rh/            # DomÃ­nio RH (folha)
â”œâ”€â”€ compliance/    # DomÃ­nio compliance
â”œâ”€â”€ financeiro/    # DomÃ­nio financeiro (CNAB)
â””â”€â”€ core/          # CÃ³digo compartilhado
```

## âš™ï¸ ConfiguraÃ§Ã£o

Edite `.env` com:
- Credenciais de banco de dados
- Tokens de APIs (Focus NFe, etc)
- Certificados digitais
- ConfiguraÃ§Ãµes CNAB

## ğŸ”’ SeguranÃ§a

âš ï¸ **NUNCA** versione:
- Arquivo `.env` com secrets reais
- Certificados digitais (`.pfx`, `.pem`)
- Chaves privadas
- Credenciais de produÃ§Ã£o

## ğŸ“ Status do Projeto

- [x] ConfiguraÃ§Ã£o inicial
- [ ] MÃ³dulo Fiscal (NFS-e)
- [ ] MÃ³dulo RH (Folha)
- [ ] MÃ³dulo Compliance
- [ ] MÃ³dulo Financeiro (CNAB)
- [ ] Testes completos
- [ ] Deploy

## ğŸ“„ LicenÃ§a

MIT
EOF

echo "âœ… README.md criado"
PASSO 12: Criar arquivo init.py no src (IMPORTANTE)
bash
touch src/__init__.py
echo "âœ… src/__init__.py criado"
PASSO 13: Verificar estrutura completa
bash
# Ver Ã¡rvore de diretÃ³rios
tree -L 3 -I '__pycache__|.venv|*.pyc' src/

# Ou se nÃ£o tiver tree:
find src -type f -name "*.py" | head -20
ğŸ”„ INSTALAÃ‡ÃƒO E VERIFICAÃ‡ÃƒO
Execute agora para instalar tudo e testar:

bash
# 1. Criar ambiente virtual (se ainda nÃ£o tiver)
python -m venv .venv

# 2. Ativar ambiente
# Linux/Mac:
source .venv/bin/activate
# Windows:
.venv\Scripts\activate

# 3. Instalar dependÃªncias
pip install --upgrade pip
pip install -r requirements.txt

# 4. Instalar python-cnab via Git
pip install git+https://github.com/scardine/cnab.git

# 5. Testar se API inicia
uvicorn src.main:app --reload --port 8000
```

Se tudo der certo, vocÃª verÃ¡:
```
INFO:     Uvicorn running on http://127.0.0.1:8000 (Press CTRL+C to quit)
INFO:     Started reloader process
INFO:     Started server process
INFO:     Waiting for application startup.
INFO:     Application startup complete.
âœ… CHECKLIST DE VALIDAÃ‡ÃƒO
Execute cada comando e marque âœ…:

bash
# 1. Verificar se .gitignore existe
[ ] ls -la .gitignore

# 2. Verificar se API inicia sem erros
[ ] uvicorn src.main:app --reload --port 8000

# 3. Testar endpoint health
[ ] curl http://localhost:8000/health

# 4. Acessar documentaÃ§Ã£o Swagger
[ ] Abrir: http://localhost:8000/api/docs

# 5. Testar endpoints de ping
[ ] curl http://localhost:8000/api/v1/fiscal/ping
[ ] curl http://localhost:8000/api/v1/rh/ping
[ ] curl http://localhost:8000/api/v1/compliance/ping
[ ] curl http://localhost:8000/api/v1/financeiro/ping

# 6. Rodar testes (mesmo que vazios)
[ ] pytest

# 7. Verificar formataÃ§Ã£o
[ ] black --check src/

# 8. Verificar linting
[ ] ruff check src/
ğŸ“Š CORREÃ‡Ã•ES DO CHECKLIST INICIAL
Comparando com o checklist que vocÃª mencionou:

Item Checklist	Status Anterior	Status Atual	Como Corrigiu
Criar ambiente virtual	âŒ NÃ£o feito	âœ… Comando fornecido	python -m venv .venv
Instalar dependÃªncias	âš ï¸ Incompleto	âœ… Completo	requirements.txt atualizado
Configurar .env	âŒ NÃ£o existia	âœ… Criado	cp .env.example .env
Certificado digital	â¸ï¸ Pendente	â¸ï¸ Para depois	Opcional para testes
Configurar banco PostgreSQL	â¸ï¸ Pendente	â¸ï¸ Para depois	Docker Compose pronto
Executar migraÃ§Ãµes Alembic	â¸ï¸ Pendente	â¸ï¸ Para depois	alembic.ini pendente
Configurar Redis	â¸ï¸ Pendente	â¸ï¸ Para depois	Docker Compose pronto
Testes unitÃ¡rios	âŒ NÃ£o havia	âš ï¸ Estrutura criada	pytest.ini criado
Documentar DPO/LGPD	â¸ï¸ Pendente	â¸ï¸ Para depois	Fase posterior
.gitignore	âŒ CRÃTICO	âœ… RESOLVIDO	Criado no Passo 1
Config settings	âŒ CRÃTICO	âœ… RESOLVIDO	src/core/config.py
Imports corretos	âŒ CRÃTICO	âœ… RESOLVIDO	main.py corrigido
ğŸ¯ PRÃ“XIMOS PASSOS RECOMENDADOS
Agora que a estrutura estÃ¡ correta, siga esta ordem:

1. HOJE - Validar configuraÃ§Ã£o (30 min)
bash
# Confirmar que tudo funciona
uvicorn src.main:app --reload --port 8000
# Acessar: http://localhost:8000/api/docs
# Testar os 4 endpoints /ping
2. Esta Semana - Semana 1 do seu plano (8-10h)
Estudar FastAPI bÃ¡sico (tutoriais oficial)
Implementar 3 endpoints simples em cada domÃ­nio
Escrever primeiros testes
3. PrÃ³xima Semana - Semana 2 do seu plano (8-10h)
Implementar modelos Pydantic
Criar schemas de request/response
Documentar endpoints no Swagger
âš ï¸ AVISOS IMPORTANTES
ğŸ”´ Antes de fazer commit:
bash
# Verifique se .env NÃƒO vai ser commitado
git status

# Se aparecer .env na lista:
git rm --cached .env
git add .gitignore
git commit -m "Add .gitignore to protect secrets"
ğŸŸ¡ DependÃªncias que precisam atenÃ§Ã£o:
python-cnab: Instalar via Git (nÃ£o via pip)
bash
pip install git+https://github.com/scardine/cnab.git
xmlsec: Pode precisar de libs do sistema
bash
# Ubuntu/Debian
sudo apt-get install libxml2-dev libxmlsec1-dev libxmlsec1-openssl

# MacOS
brew install libxmlsec1
lxml: Pode precisar de compilaÃ§Ã£o
bash
# Se der erro, instale as dependÃªncias do sistema primeiro
```

---

# ğŸ“ COMO USAR ESTE GUIA COM O CLAUDE

### Quando tiver problemas:
```
"Segui o guia de correÃ§Ã£o mas estou com erro:
[cole o erro aqui]

Estou na etapa: [nÃºmero do passo]
Comando executado: [comando que deu erro]"
```

### Para validar se estÃ¡ tudo certo:
```
"Completei todas as correÃ§Ãµes do guia.
Minha API estÃ¡ rodando em http://localhost:8000
Prints:
- /health retorna: [cole resposta]
- /api/docs mostra: [descreva]
Posso comeÃ§ar a Semana 1 do plano de estudos?"
Agora execute os passos acima E ME CONFIRME quando terminar! Vou te ajudar se encontrar algum erro. ğŸš€


