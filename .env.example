# ============================================
# CONFIGURAÇÃO GERAL DA APLICAÇÃO
# ============================================
NODE_ENV=development                    # development | homologation | production
APP_NAME=FinancialAPI
APP_PORT=8000
APP_URL=http://localhost:8000
API_VERSION=v1
TZ=America/Sao_Paulo                   # Timezone padrão Brasil
LOG_LEVEL=info                         # error | warn | info | debug
DEBUG=false

# ============================================
# NFE/NFC-E - NOTA FISCAL ELETRÔNICA
# ============================================

# Ambiente e Identificação
NFE_AMBIENTE=2                         # 1=Produção, 2=Homologação
NFE_UF=SP                             # Sigla do estado (SP, MG, RJ, etc.)
NFE_VERSAO=4.00                       # Versão NFe (3.10 ou 4.00)
NFCE_AMBIENTE=2

# Dados da Empresa
EMPRESA_CNPJ=12345678000190           # CNPJ 14 dígitos sem formatação
EMPRESA_IE=123456789                  # Inscrição Estadual
EMPRESA_RAZAO_SOCIAL=Empresa Exemplo LTDA
EMPRESA_NOME_FANTASIA=Empresa Exemplo

# Certificado Digital A1 (arquivo)
CERTIFICADO_TIPO=A1                   # A1 (arquivo) ou A3 (token/smartcard)
CERTIFICADO_A1_PATH=/certs/certificado.pfx
CERTIFICADO_A1_PASSWORD=senha_certificado_123
CERTIFICADO_EXPIRATION_ALERT_DAYS=30

# URLs SEFAZ Homologação (SP exemplo)
SEFAZ_NFE_HOM_STATUS_SERVICO=https://homologacao.nfe.fazenda.sp.gov.br/ws/nfestatusservico4.asmx
SEFAZ_NFE_HOM_AUTORIZACAO=https://homologacao.nfe.fazenda.sp.gov.br/ws/nfeautorizacao4.asmx
SEFAZ_NFE_HOM_RET_AUTORIZACAO=https://homologacao.nfe.fazenda.sp.gov.br/ws/nferetautorizacao4.asmx
SEFAZ_NFE_HOM_CONSULTA=https://homologacao.nfe.fazenda.sp.gov.br/ws/nfeconsultaprotocolo4.asmx
SEFAZ_NFE_HOM_EVENTO=https://homologacao.nfe.fazenda.sp.gov.br/ws/nferecepcaoevento4.asmx

# URLs SEFAZ Produção (SP exemplo)
SEFAZ_NFE_PROD_STATUS_SERVICO=https://nfe.fazenda.sp.gov.br/ws/nfestatusservico4.asmx
SEFAZ_NFE_PROD_AUTORIZACAO=https://nfe.fazenda.sp.gov.br/ws/nfeautorizacao4.asmx
SEFAZ_NFE_PROD_RET_AUTORIZACAO=https://nfe.fazenda.sp.gov.br/ws/nferetautorizacao4.asmx
SEFAZ_NFE_PROD_CONSULTA=https://nfe.fazenda.sp.gov.br/ws/nfeconsultaprotocolo4.asmx

# Contingência SEFAZ
SEFAZ_CONTINGENCY_SVAN_AUTORIZACAO=https://www.sefazvirtual.fazenda.gov.br/NFeAutorizacao4/NFeAutorizacao4.asmx

# NFC-e QR Code
NFCE_QRCODE_HOM_URL=https://www.homologacao.fazenda.sp.gov.br/nfce/qrcode
NFCE_QRCODE_PROD_URL=https://www.fazenda.sp.gov.br/nfce/qrcode
NFCE_CSC_ID=000001                    # ID do Código de Segurança
NFCE_CSC_TOKEN=abc123def456ghi789jkl012mno345pqr678

# Séries e Numeração
NFE_SERIE_PRODUCAO=1
NFCE_SERIE_PRODUCAO=1
NFE_SERIE_HOMOLOGACAO=999
NFE_NUMERO_INICIAL=1
NFE_LOTE_TAMANHO_MAXIMO=50
NFE_TIMEOUT_WEBSERVICE=30000          # Timeout em milissegundos

# Paths de Armazenamento
NFE_XML_STORAGE_PATH=/storage/nfe/xml
NFE_DANFE_STORAGE_PATH=/storage/nfe/danfe
NFE_SCHEMA_PATH=/schemas/nfe

# ============================================
# CNAB - ARQUIVOS BANCÁRIOS
# ============================================

# Configuração Geral CNAB
CNAB_VERSAO=240                       # 240 ou 400 (padrão FEBRABAN)
CNAB_TIPO=REMESSA                     # REMESSA ou RETORNO
CNAB_ENCODING=ISO-8859-1

# Paths CNAB
CNAB_REMESSA_PATH=/storage/cnab/remessa
CNAB_RETORNO_PATH=/storage/cnab/retorno
CNAB_PROCESSADOS_PATH=/storage/cnab/processados
CNAB_ERRO_PATH=/storage/cnab/erros

# Configuração Banco Principal (Banco do Brasil - 001)
BANCO_CODIGO=001                      # 001=BB, 237=Bradesco, 341=Itaú, 104=Caixa
BANCO_NOME=Banco do Brasil
BANCO_AGENCIA=1234
BANCO_AGENCIA_DV=5
BANCO_CONTA=12345678
BANCO_CONTA_DV=9
BANCO_CONVENIO=1234567
BANCO_CARTEIRA=17

# API Bancária (se usar integração API)
BANCO_API_URL=https://api.bb.com.br/cobrancas/v2
BANCO_API_KEY=your_api_key_here
BANCO_API_SECRET=your_api_secret_here
BANCO_API_CLIENT_ID=your_client_id

# Configuração Boleto
BOLETO_DIAS_VENCIMENTO=30
BOLETO_JUROS_PERCENTUAL=2.0
BOLETO_MULTA_PERCENTUAL=10.0
BOLETO_DIAS_PROTESTO=5

# Processamento Automático
CNAB_CRON_REMESSA=0 8 * * *          # Diário às 8h
CNAB_CRON_RETORNO=0 */2 * * *        # A cada 2 horas
CNAB_AUTO_PROCESS=true

# ============================================
# BANCO DE DADOS
# ============================================

# PostgreSQL (recomendado para sistemas financeiros)
DB_CONNECTION=postgresql
DB_HOST=localhost
DB_PORT=5432
DB_DATABASE=financial_db
DB_USERNAME=financial_user
DB_PASSWORD=strong_password_here
DB_SCHEMA=public

# Connection Pool
DB_POOL_MIN=2
DB_POOL_MAX=10
DB_POOL_IDLE_TIMEOUT=10000
DB_POOL_CONNECTION_TIMEOUT=2000

# SSL (Produção)
DB_SSL=true
DB_SSL_REJECT_UNAUTHORIZED=true
DB_SSL_CA_PATH=/certs/db-ca.pem

# Replica (alta disponibilidade)
DB_REPLICA_HOST=replica.database.com
DB_REPLICA_PORT=5432
DB_REPLICA_DATABASE=financial_db

# Redis (cache e filas)
REDIS_HOST=localhost
REDIS_PORT=6379
REDIS_PASSWORD=redis_password_here
REDIS_DB=0
REDIS_PREFIX=financial_api
REDIS_TTL=3600

# ============================================
# SEGURANÇA E AUTENTICAÇÃO
# ============================================

# JWT
JWT_SECRET=your_super_secret_jwt_key_minimum_32_characters_long
JWT_EXPIRATION=1h
JWT_REFRESH_SECRET=your_refresh_token_secret_key
JWT_REFRESH_EXPIRATION=7d
JWT_ALGORITHM=HS256

# Criptografia
ENCRYPTION_KEY=32_byte_base64_encoded_encryption_key
ENCRYPTION_ALGORITHM=aes-256-gcm
ENCRYPT_SENSITIVE_FIELDS=true

# Chaves específicas por tipo de dado
ENCRYPT_KEY_PII=pii_encryption_key                    # Dados pessoais (CPF, RG)
ENCRYPT_KEY_FINANCIAL=financial_data_encryption_key   # Dados bancários

# Hashing de senhas
BCRYPT_ROUNDS=12

# ============================================
# LGPD - CONFORMIDADE
# ============================================

LGPD_ENABLED=true
LGPD_DATA_RETENTION_DAYS=1825        # 5 anos (exigência legal)
LGPD_ANONYMIZE_AFTER_DAYS=2190       # 6 anos
LGPD_LOG_ACCESS=true
LGPD_CONSENT_REQUIRED=true

# DPO - Data Protection Officer
DPO_NAME=Nome do Encarregado de Dados
DPO_EMAIL=dpo@empresa.com.br
DPO_PHONE=+55 11 98765-4321

# Audit Trail
AUDIT_ENABLED=true
AUDIT_LOG_PATH=/var/log/audit
AUDIT_LOG_RETENTION_DAYS=2555        # 7 anos para registros financeiros
AUDIT_LOG_SENSITIVE_DATA=false       # Não logar conteúdo sensível
AUDIT_LOG_IP_ADDRESSES=true

# Anonimização
ANONYMIZE_CPF=true
ANONYMIZE_CREDIT_CARD=true
ANONYMIZE_BANK_ACCOUNT=true

# ============================================
# EMAIL E NOTIFICAÇÕES
# ============================================

# SMTP
MAIL_MAILER=smtp
MAIL_HOST=smtp.gmail.com
MAIL_PORT=587
MAIL_USERNAME=noreply@empresa.com.br
MAIL_PASSWORD=email_password_here
MAIL_ENCRYPTION=tls
MAIL_FROM_ADDRESS=noreply@empresa.com.br
MAIL_FROM_NAME=Sistema Financeiro

# ============================================
# ARMAZENAMENTO DE ARQUIVOS
# ============================================

# Local ou S3
STORAGE_DISK=local                    # local ou s3
STORAGE_PATH=/var/www/storage

# AWS S3 ou MinIO
AWS_ACCESS_KEY_ID=your_access_key
AWS_SECRET_ACCESS_KEY=your_secret_key
AWS_DEFAULT_REGION=us-east-1
AWS_BUCKET=financial-documents
AWS_URL=https://s3.amazonaws.com

# ============================================
# MONITORAMENTO
# ============================================

# Sentry Error Tracking
SENTRY_DSN=https://your_sentry_dsn@sentry.io/project_id
SENTRY_ENVIRONMENT=production
SENTRY_TRACES_SAMPLE_RATE=0.1

# Prometheus Métricas
METRICS_ENABLED=true
METRICS_PORT=9090
METRICS_PATH=/metrics

# Health Check
HEALTH_CHECK_ENABLED=true
HEALTH_CHECK_PATH=/health

# ============================================
# FILAS E WORKERS
# ============================================

QUEUE_CONNECTION=redis
QUEUE_DRIVER=redis
QUEUE_NFE_EMISSION=nfe:emission
QUEUE_NFE_CANCELLATION=nfe:cancellation
QUEUE_CNAB_PROCESSING=cnab:processing
QUEUE_WORKER_CONCURRENCY=5
QUEUE_WORKER_TIMEOUT=30000
QUEUE_MAX_ATTEMPTS=3

# ============================================
# PIX (Banco Central)
# ============================================

PIX_ENABLED=true
PIX_KEY_TYPE=cnpj                    # cpf | cnpj | email | phone | random
PIX_KEY_VALUE=12345678000190
PIX_DICT_API_URL=https://dict.pi.rsfn.net.br
PIX_DICT_API_KEY=your_pix_dict_key
PIX_MERCHANT_NAME=Empresa Exemplo LTDA
PIX_MERCHANT_CITY=São Paulo

# ============================================
# RATE LIMITING
# ============================================

RATE_LIMIT_WINDOW_MS=900000          # 15 minutos
RATE_LIMIT_MAX_REQUESTS=100

# ============================================
# CORS
# ============================================

CORS_ORIGINS=["http://localhost:3000","https://app.empresa.com.br"]
CORS_ALLOW_CREDENTIALS=true